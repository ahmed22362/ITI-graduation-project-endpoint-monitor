serviceAccount:
  name: argocd-image-updater
  create: true

# Pod Identity requires AWS SDK to be available
# The auth script will use the pod's IAM credentials automatically
authScripts:
  enabled: true
  scripts:
    auth.sh: |
      #!/bin/sh
      aws ecr get-authorization-token --region eu-north-1 --output text --query 'authorizationData[].authorizationToken' | base64 -d

config:
  registries:
    - name: ECR
      api_url: https://428346553093.dkr.ecr.eu-north-1.amazonaws.com
      prefix: 428346553093.dkr.ecr.eu-north-1.amazonaws.com
      ping: yes
      insecure: no
      credentials: ext:/scripts/auth.sh
      credsexpire: 10h
